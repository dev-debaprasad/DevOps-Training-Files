________________

ANS-Controller
_______________
SG - ALL ICMP iPv4
Create an EC2 Instance - Redhat - T3.Micro -12Gib

# hostnamectl set-hostname ans-controller.example.com
# bash
# yum update -y
# python --version
# yum install ansible-core
# ansible --version
# cd /etc/ansible/
# ll
# vim ansible.cfg
> https://github.com/sanjayguruji/ansible-code/blob/main/ansible.cfg
> Copy the content
> paste inside vim
:wq

//inside anisible dir

-> 
# yum install awscli
# yum install pip
# pip install boto3
# aws configure // IAM  - Admin access
# vim hosts
>
 
[localhost]
localhost
localhost ansible_connection=local ansible_python_interpreter=/usr/bin/python3

# vim creds.yaml
> 
aws_access_key: <add own>
aws_secret_key: <add own>

# vim ec2.yaml
https://github.com/sanjayguruji/ansible-code/blob/main/Create-AWS-Ec2.yaml

>

---
- name: creating ec2 instance
  hosts: localhost
  vars_files:

      - creds.yaml
  tasks:
        - name: creating Ec2 instance via Ansible
          amazon.aws.ec2_instance:
            name: k8s-master
            instance_type: t3.micro
            image_id: ami-052064a798f08f0d3              
            vpc_subnet_id: subnet-08b6065a123cdaf14
            security_group: sg-0a35908e41f9ebf34
            key_name: ansible
            region: us-east-1
            count: 1
            state: present

// Change the image-id, vpc_subnet_id, security_group and (key_name)
# ansible-galaxy collection install amazon.aws
# ansible-playbook ec2.yaml
